language: java

jdk:
   - oraclejdk8

addons:
  firefox: "29.0"

build:
  ci:
    - mkdir -p shippable/testresults
    - mkdir -p shippable/codecoverage
    - echo 'CI Running'
    - ./gradlew assemble
    - ./gradlew test -PtestOutputDir=shippable/testresults
    - ./gradlew systemTest -PtestOutputDir=shippable/testresults
    - export DISPLAY=:99.0
    - sudo apt-get install unzip;
    - wget -O /tmp/chromedriver.zip http://chromedriver.storage.googleapis.com/2.29/chromedriver_linux64.zip && sudo unzip /tmp/chromedriver.zip chromedriver -d /usr/local/bin/;
    - xvfb-run --server-args="-ac" ./gradlew uiTest -PtestOutputDir=shippable/testresults
     
    