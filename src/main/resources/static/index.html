<!doctype html>
<html id="controller" ng-app="advisorHub" ng-controller="ResourceController as controller">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<base href="/">
<title>advisorHub</title>
<link rel="stylesheet" type="text/css" href="/system/webjars/bootstrap/3.3.7-1/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="/system/webjars/angularjs/1.6.0/angular-csp.css" />
<link rel="stylesheet" href="/system/css/style.css">

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
  <div ng-hide="!controller.loaded">Loading...</div>
  <div ng-show="!controller.loaded">
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
            aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand title" href=".">{{controller.resource.title}}</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav" id="links">
            <li ng-repeat="(rel, link) in controller.resource._links" class="{{rel + ' ' + ('self'==rel ? 'active' : '')}}"><a
              href="{{link.href}}" rel="{{rel}}" ng-click="controller.processNavClick($event)">{{link.title
                ? link.title : rel }}</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li ng-hide="!controller.loading" class="" id="loading"><a href="#">Loading...</a></li>
            <li ng-show="!controller.loading" class="ng-hide" id="loaded"><a href="#">Loaded</a></li>
          </ul>
        </div>
        <!--/.nav-collapse -->

      </div>
    </nav>

    <div class="container" ng-if="controller.hasOwnProperty('resource')">
      <div class="page-header">
        <h1>
          <a href="{{controller.resource.path}}">{{controller.resource.type}}</a>
        </h1>
      </div>

      <div id="properties">
        <div class="row" ng-repeat="(key, value) in controller.resource.data">
          <div class="item">
            <div class="properties:{{id}}:{{key}}">
              <label for="property:{{id}}:{{key}}">{{key}}</label>
              <div id="property:{{id}}:{{key}}">{{value}}</div>
            </div>
          </div>
        </div>
      </div>

      <div id="resources">
        <div class="row" ng-repeat="summary in controller.resource.subResources">
          <div id="{{summary.id}}" class="item" title="{{summary.type}}">
            <h2>
              <a href="{{summary.path}}" ng-click="controller.processNavClick($event)">{{summary.data.name}}</a>
            </h2>
            <ul>
              <li class="dataItem" ng-repeat="(key, value) in summary.data"><label for="{{summary.path}}:{{key}}">{{key}}</label><span
                class="dataSeperator">: </span><span id="{{summary.path}}:{{key}}">{{value}}</span></li>
            </ul>
          </div>
        </div>
      </div>

      <div id="actions">
        <div ng-repeat="action in controller.resource.queries"
          ng-class="{'has-error': controller.error.hasOwnProperty(action.name) && controller.error[action.name].hasOwnProperty('error')}">
          <h3>{{action.name}}</h3>
          <form ng-submit="controller.processForm(this)" name="{{action.name}}" method="get">
            <div class="row">
              <div ng-repeat="field in action.fields" ng-if="field.type!='submit'" class="form-group col-sm-4">
                <div class="control-group"
                  ng-class="{'has-error': field.hasOwnProperty('error')}">
                  <label class="control-label" for="{{field.name}}" ng-if="field.type!='hidden'">{{field.name}}</label>
                  <div class="controls">
                    <input name="{{field.name}}" type="{{field.type}}" value="{{field.value}}" class="form-control"
                      ng-model="controller.actionValues[action.name][field.name]"
                      ng-init="controller.actionValues[action.name][field.name]=field.value" /> <span
                      class="help-inline help-block">{{field.error}}</span>
                    <pre>{{controller.actionValues[action.name][field.name]}}</pre>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div ng-repeat="field in action.fields" ng-if="field.type=='submit'" class="form-group col-sm-4">
                <input type="submit" class="btn btn-success" value="{{field.value}}"
                  name="{{field.name}}" ng-model="controller.actionValues[action.name][field.name]"
                  ng-init="controller.actionValues[action.name][field.name]=field.value" />
              </div>
            </div>
          </form>
          <span class="help-inline help-block">{{controller.error[action.name].error}}</span>
          <pre>{{action}}</pre>
        </div>

        <div ng-repeat="action in controller.resource.commands"
          ng-class="{'has-error': controller.error.hasOwnProperty(action.name) && controller.error[action.name].hasOwnProperty('error')}">
          <h3>{{action.name}}</h3>
          <form ng-submit="controller.processForm(this)" name="{{action.name}}" method="{{action.method}}">
            <div class="row">
              <div ng-repeat="field in action.fields" ng-if="field.type!='submit'" class="form-group col-sm-4">
                <div class="control-group"
                  ng-class="{'has-error': field.hasOwnProperty('error')}">
                  <label class="control-label" for="{{field.name}}" ng-if="field.type!='hidden'">{{field.name}}</label>
                  <div class="controls">
                    <input name="{{field.name}}" type="{{field.type}}" value="{{field.value}}" class="form-control"
                      ng-model="controller.actionValues[action.name][field.name]"
                      ng-init="controller.actionValues[action.name][field.name]=field.value" /> <span
                      class="help-inline help-block">{{field.error}}</span>
                    <pre>{{controller.actionValues[action.name][field.name]}}</pre>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div ng-repeat="field in action.fields" ng-if="field.type=='submit'" class="form-group col-sm-4">
                <input type="submit" class="btn btn-success" value="{{field.value}}"
                  name="{{field.name}}" ng-model="controller.actionValues[action.name][field.name]"
                  ng-init="controller.actionValues[action.name][field.name]=field.value" />
              </div>
            </div>
          </form>
          <span class="help-inline help-block">{{controller.error[action.name].error}}</span>
          <pre>{{action}}</pre>
        </div>

        <div ng-repeat="action in controller.resource.createCommands"
          ng-class="{'has-error': controller.error.hasOwnProperty(action.name) && controller.error[action.name].hasOwnProperty('error')}">
          <h3>{{action.name}}</h3>
          <form ng-submit="controller.processForm(this)" name="{{action.name}}" method="{{action.method}}">
            <div class="row">
              <div ng-repeat="field in action.fields" ng-if="field.type!='submit'" class="form-group col-sm-4">
                <div class="control-group"
                  ng-class="{'has-error': field.hasOwnProperty('error')}">
                  <label class="control-label" for="{{field.name}}" ng-if="field.type!='hidden'">{{field.name}}</label>
                  <div class="controls">
                    <input name="{{field.name}}" type="{{field.type}}" value="{{field.value}}" class="form-control"
                      ng-model="controller.actionValues[action.name][field.name]"
                      ng-init="controller.actionValues[action.name][field.name]=field.value" /> <span
                      class="help-inline help-block">{{field.error}}</span>
                    <pre>{{controller.actionValues[action.name][field.name]}}</pre>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div ng-repeat="field in action.fields" ng-if="field.type=='submit'" class="form-group col-sm-4">
                <input type="submit" class="btn btn-success" value="{{field.value}}"
                  name="{{field.name}}" ng-model="controller.actionValues[action.name][field.name]"
                  ng-init="controller.actionValues[action.name][field.name]=field.value" />
              </div>
            </div>
          </form>
          <span class="help-inline help-block">{{controller.error[action.name].error}}</span>
          <pre>{{action}}</pre>
        </div>

      </div>
      <pre>{{controller.resource}}</pre>
    </div>

    <div class="container" ng-if="!controller.hasOwnProperty('resource')">
      <div class="page-header not-found">
        <h1>Not Found</h1>
      </div>
    </div>
  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="/system/webjars/jquery/3.1.1-1/jquery.min.js" type="text/javascript"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script type="text/javascript" src="/system/webjars/bootstrap/3.3.7-1/js/bootstrap.min.js"></script>
  <script src="/system/webjars/angularjs/1.6.0/angular.min.js" type="text/javascript"></script>
  <script src="/system/js/resource.js" type="text/javascript"></script>
</body>
</html>